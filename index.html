<!DOCTYPE html>
<html>
<head>
  <title>Chronic Space Cadet Chat</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: Arial, sans-serif; 
      background: #f0f0f0; 
      display: flex;
      justify-content: center;
      padding-top: 50px;
    }

    #npcContainer {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    /* GIF avatar always visible */
    #npcGif {
      width: 120px;
    }

    /* Talk button */
    #talkButton {
      padding: 8px 16px;
      font-family: 'Cinzel', serif;
      font-size: 16px;
      cursor: pointer;
      margin-top: 5px;
    }

    /* Scroll chat box */
    #npcBox {
      width: 400px;
      height: 500px;
      background-image: url('scroll.png');
      background-size: contain;
      background-repeat: no-repeat;
      padding-top: 80px;    
      padding-bottom: 80px; 
      box-sizing: border-box;
      position: relative;
      display: none; /* hidden until Talk clicked */
    }

    #chatArea {
      height: calc(100% - 160px); 
      overflow-y: auto;
      padding: 10px 20px;
      font-family: 'Cinzel', serif;
    }

    #messages div {
      margin-bottom: 10px;
    }

    .npc-message { color: #5b3a1e; font-weight: bold; } 
    .user-message { color: #1e3a5b; font-weight: bold; } 

    #userInput {
      width: calc(100% - 20px);
      padding: 5px 10px;
      margin-top: 10px;
      box-sizing: border-box;
      font-family: 'Cinzel', serif;
    }

    /* Close button */
    #closeButton {
      position: absolute;
      top: 10px;
      right: 15px;
      cursor: pointer;
      font-weight: bold;
      font-family: 'Cinzel', serif;
      font-size: 16px;
      background: transparent;
      border: none;
    }
  </style>
</head>

<body>
  <div id="npcContainer">
    <img id="npcGif" src="npc-animation.gif" alt="Chronic Space Cadet">
    <button id="talkButton">Talk</button>

    <div id="npcBox">
      <button id="closeButton">X</button>
      <div id="chatArea">
        <div id="messages" class="npc-message">
          Chronic Space Cadet: Hello traveler! I’m the Chronic Space Cadet — a humble guide keeping everything in order. I can help you explore, learn, and survive your first steps. Type "help" to see what I can do for you.
        </div>
      </div>
      <input id="userInput" placeholder="Say something..." />
    </div>
  </div>

  <script>
    const talkButton = document.getElementById("talkButton");
    const npcBox = document.getElementById("npcBox");
    const closeButton = document.getElementById("closeButton");
    const messages = document.getElementById("messages");
    const input = document.getElementById("userInput");

    const chronicSpaceDescription = `Chronic Space is a learning immersive game empowering interactive collaborative experiences. It intertwines learning, empowerment, and incentives to keep people playing. It teaches them and gradually helps them create things with real-world impact — from personal growth to world change. The system gives choices that guide members naturally to what they like, want, and need to learn. Depending on interests, quests teach everything from art creation, business setup, growing food, to designing scalable systems, and connecting social platforms and real-world actions together. The entire environment empowers people while generating meaningful projects and resources.`;

    // Show chat when Talk button clicked
    talkButton.addEventListener("click", () => {
      npcBox.style.display = "block";
    });

    // Close chat
    closeButton.addEventListener("click", () => {
      npcBox.style.display = "none";
    });

    // Handle input messages
    input.addEventListener("keydown", function(e) {
      if (e.key === "Enter") {
        const userMsg = input.value.trim();
        if (!userMsg) return;

        messages.innerHTML += `<div class="user-message">You: ${userMsg}</div>`;
        input.value = "";

        let response = "I don't know how to answer that yet.";

        if (userMsg.toLowerCase() === "help") {
          response = `Options:\n1) What is ChronicSpace?`;
        } else if (userMsg.toLowerCase() === "1" || userMsg.toLowerCase() === "what is chronicspace?") {
          response = chronicSpaceDescription;
        } else if (userMsg.toLowerCase().includes("hello")) {
          response = "Hello traveler! Welcome again to Chronic Space.";
        }

        messages.innerHTML += `<div class="npc-message">Chronic Space Cadet: ${response}</div>`;
        messages.scrollTop = messages.scrollHeight;
      }
    });
  </script>
</body>
</html>
